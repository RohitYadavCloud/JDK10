<!-- Generated by Harlequin Webmaker 2.0; Transducer 1.0.1 --> <HTML> <HEAD>
<TITLE>vmspec: Constant Pool Resolution</TITLE>
</HEAD>
<BODY>
<A NAME=HEADING32></A>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-31.html">Prev</A>       <A HREF="vmspec-33.html">Next</A>       <A HREF="vmspec-31.html">Up</A>       <P>
<HR>
<A NAME=HEADING32-0></A>
<H2>A.1 Constant Pool Resolution</H2>
When the class is read in, an array <CODE>constant_pool[]</CODE> of size <CODE>nconstants</CODE> is created and assigned to a field in the class. <CODE>constant_pool[0]</CODE> is set to point to a dynamically allocated array which indicates which fields in the constant_pool have already been resolved. <CODE>constant_pool[1] </CODE>through <CODE>constant_pool[nconstants - 1]</CODE> are set to point at the "type" field that corresponds to this constant item.<P>
When an instruction is executed that references the constant pool, an index is generated, and <CODE>constant_pool[0]</CODE> is checked to see if the index has already been resolved. If so, the value of <CODE>constant_pool[index]</CODE> is returned. If not, the value of <CODE>constant_pool[index]</CODE> is resolved to be the actual pointer or data, and overwrites whatever value was already in <CODE>constant_pool[index].</CODE><P>
<HR>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-31.html">Prev</A>       <A HREF="vmspec-33.html">Next</A>       <A HREF="vmspec-31.html">Up</A>       <P>
</BODY>
</HTML> 