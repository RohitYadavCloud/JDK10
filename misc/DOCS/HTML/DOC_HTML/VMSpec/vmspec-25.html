<!-- Generated by Harlequin Webmaker 2.0; Transducer 1.0.1 --> <HTML> <HEAD>
<TITLE>vmspec: Table Jumping</TITLE>
</HEAD>
<BODY>
<A NAME=HEADING25></A>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-24.html">Prev</A>       <A HREF="vmspec-26.html">Next</A>       <A HREF="vmspec-12.html">Up</A>       <P>
<HR>
<A NAME=HEADING25-0></A>
<H2>3.13 Table Jumping</H2>
<H3><A NAME=MARKER-9-390></A><A NAME=MARKER-8-391></A><A NAME=MARKER-8-392></A>tableswitch</H3>
Access jump table by index and jump
<TABLE BORDER="1">
<CAPTION>&nbsp;</CAPTION>
<TD>tableswitch = 170<TR>
<TD>...0-3 byte pad...<TR>
<TD>default-offset1<TR>
<TD>default-offset2<TR>
<TD>default-offset3<TR>
<TD>default-offset4<TR>
<TD>low1<TR>
<TD>low2<TR>
<TD>low3<TR>
<TD>low4<TR>
<TD>high1<TR>
<TD>high2<TR>
<TD>high3<TR>
<TD>high4<TR>
<TD>...jump offsets...</TABLE>
<P>
<PRE>
Stack: ..., index =&gt; ...<P>
</PRE>
<CODE>tableswitch</CODE> is a variable length instruction. Immediately after the <CODE>tableswitch</CODE> instruction, between zero and three 0's are inserted as padding so that the next byte begins at an address that is a multiple of four. After the padding follow a series of signed 4-byte quantities: default-offset, low, high, and then high-low+1 further signed 4-byte offsets. The high-low+1 signed 4-byte offsets are treated as a 0-based jump table.<P>
The index must be an integer. If index is less than low or index is greater than high, then default-offset is added to the address of this instruction. Otherwise, low is subtracted from index, and the index-low'th element of the jump table is extracted, and added to the address of this instruction.<P>
<H3><A NAME=MARKER-9-393></A><A NAME=MARKER-8-394></A><A NAME=MARKER-8-395></A>lookupswitch</H3>
Access jump table by key match and jump
<TABLE BORDER="1">
<CAPTION>&nbsp;</CAPTION>
<TD>lookupswitch = 171<TR>
<TD>...0-3 byte pad...<TR>
<TD>default-offset1<TR>
<TD>default-offset2<TR>
<TD>default-offset3<TR>
<TD>default-offset4<TR>
<TD>npairs1<TR>
<TD>npairs2<TR>
<TD>npairs3<TR>
<TD>npairs4<TR>
<TD>..match-offset pairs..</TABLE>
<P>
<PRE>
Stack: ..., key =&gt; ...<P>
</PRE>
<CODE>lookupswitch</CODE> is a variable length instruction. Immediately after the <CODE>lookupswitch</CODE> instruction, between zero and three 0's are inserted as padding so that the next byte begins at an address that is a multiple of four. <P>
Immediately after the padding are a series of pairs of signed 4-byte quantities. The first pair is special. The first item of that pair is the default offset, and the second item of that pair gives the number of pairs that follow. Each subsequent pair consists of a match and an offset.<P>
The key must be an integer. The integer key on the stack is compared against each of the matches. If it is equal to one of them, the offset is added to the address of this instruction. If the key does not match any of the matches, the default offset is added to the address of this instruction.<P>
<HR>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-24.html">Prev</A>       <A HREF="vmspec-26.html">Next</A>       <A HREF="vmspec-12.html">Up</A>       <P>
</BODY>
</HTML> 