<!-- Generated by Harlequin Webmaker 2.0; Transducer 1.0.1 --> <HTML> <HEAD>
<TITLE>vmspec: Format</TITLE>
</HEAD>
<BODY>
<A NAME=HEADING6></A>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-5.html">Prev</A>       <A HREF="vmspec-7.html">Next</A>       <A HREF="vmspec-5.html">Up</A>       <P>
<HR>
<A NAME=HEADING6-0></A>
<H2>2.1 Format</H2>
The following pseudo-structure gives a top-level description of the format of a class file:<P>
<PRE>
<CODE>ClassFile {</CODE>
<CODE> u4 magic;</CODE>
<CODE> u2 minor_version;</CODE>
<CODE> u2 major_version;</CODE>
<CODE> u2 constant_pool_count;</CODE>
<CODE> cp_info constant_pool[constant_pool_count - 1];</CODE>
<CODE> u2 access_flags;</CODE>
<CODE> u2 this_class;</CODE>
<CODE> u2 super_class;</CODE>
<CODE> u2 interfaces_count;</CODE>
<CODE> u2 interfaces[interfaces_count];</CODE>
<CODE> u2 fields_count;</CODE>
<CODE> field_info fields[fields_count];</CODE>
<CODE> u2 methods_count;</CODE>
<CODE> method_info methods[methods_count];</CODE>
<CODE> u2 attributes_count;</CODE>
<CODE> attribute_info attributes[attribute_count];</CODE>
<CODE>}</CODE>
<CODE></CODE>
</PRE>
<H3>magic</H3>
This field must have the value 0xCAFEBABE.<P>
<H3>minor_version, major_version</H3>
These fields contain the version number of the Java compiler that produced this class file. An implementation of the virtual machine will normally support some range of minor version numbers 0-<CODE>n</CODE> of a particular major version number. If the minor version number is incremented the new code won't run on the old virtual machines, but it is possible to make a new virtual machine which can run versions up to <CODE>n</CODE>+1.<P>
A change of the major version number indicates a major incompatible change, one that requires a different virtual machine that may not support the old major version in any way.<P>
The current major version number is 45; the current minor version number is 3.<P>
<H3>constant_pool_count</H3>
This field indicates the number of entries in the constant pool in the class file.<P>
<H3>constant_pool</H3>
The constant pool is an table of values. These values are the various string constants, class names, field names, and others that are referred to by the class structure or by the code.<P>
<CODE>constant_pool[0]</CODE> is always unused by the compiler, and may be used by an implementation for any purpose. <P>
Each of the <CODE>constant_pool</CODE> entries 1 through <CODE>constant_pool_count-1</CODE> is a variable-length entry, whose format is given by the first ''tag'' byte, as described in <A HREF=vmspec-8.html#MARKER-9-2>section 2.3</A>.<P>
<H3><A NAME=MARKER-9-1></A>access_flags</H3>
This field contains a mask of up to sixteen modifiers used with class, method, and field declarations. The same encoding is used on similar fields in <CODE>field_info</CODE> and <CODE>method_info</CODE> as described below. Here is the encoding:
<TABLE BORDER="1">
<CAPTION>&nbsp;</CAPTION>
<TD><STRONG>Flag Name</STRONG><TD><STRONG>Value</STRONG><TD><STRONG>Meaning</STRONG><TD>Used By<TR>
<TD>ACC_PUBLIC<TD>0x0001<TD>Visible to everyone <TD>Class, Method, Variable<TR>
<TD>ACC_PRIVATE<TD>0x0002<TD>Visible only to the defining class <TD>Method, Variable<TR>
<TD>ACC_PROTECTED<TD>0x0004<TD>Visible to subclasses <TD>Method, Variable<TR>
<TD>ACC_STATIC<TD>0x0008<TD>Variable or method is static <TD>Method, Variable<TR>
<TD>ACC_FINAL<TD>0x0010<TD>No further subclassing, overriding, or assignment after initialization<TD>Class, Method, Variable<TR>
<TD>ACC_SYNCHRONIZED<TD>0x0020<TD>Wrap use in monitor lock<TD>Method<TR>
<TD>ACC_VOLATILE<TD>0x0040<TD>Can't cache<TD>Variable<TR>
<TD>ACC_TRANSIENT<TD>0x0080<TD>Not to be written or read by a persistent object manager <TD>Variable<TR>
<TD>ACC_NATIVE<TD>0x0100<TD>Implemented in a language other than Java<TD>Method<TR>
<TD>ACC_INTERFACE<TD>0x0200<TD>Is an interface <TD>Class<TR>
<TD>ACC_ABSTRACT<TD>0x0400<TD>No body provided <TD>Class, Method</TABLE>
<P>
<H3>this_class</H3>
This field is an index into the constant pool; <CODE>constant_pool[this_class]</CODE> must be a CONSTANT_class.<P>
<H3>super_class</H3>
This field is an index into the constant pool. If the value of <CODE>super_class</CODE> is nonzero, then <CODE>constant_pool[super_class]</CODE> must be a class, and gives the index of this class's superclass in the constant pool.<P>
If the value of <CODE>super_class</CODE> is zero, then the class being defined must be <CODE>java.lang.Object</CODE>, and it has no superclass.<P>
<H3>interfaces_count</H3>
This field gives the number of interfaces that this class implements.<P>
<H3>interfaces</H3>
Each value in this table is an index into the constant pool. If an table value is nonzero (<CODE>interfaces[i]</CODE> != 0, where 0 &lt;=<CODE> i</CODE> &lt; <CODE>interfaces_count</CODE>), then <CODE>constant_pool[interfaces[i]]</CODE> must be an interface that this class implements.<P>
Question: How could one of these entries ever be 0?<P>
<H3>fields_count</H3>
This field gives the number of instance variables, both static and dynamic, defined by this class. The <CODE>fields</CODE> table includes only those variables that are defined explicitly by this class. It does not include those instance variables that are accessible from this class but are inherited from superclasses.<P>
<H3>fields</H3>
Each value in this table is a more complete description of a field in the class. See <A HREF=vmspec-9.html#MARKER-9-3>section 2.4</A> for more information on the <CODE>field_info</CODE> structure.<P>
<H3>methods_count</H3>
This field indicates the number of methods, both static and dynamic, defined by this class. This table only includes those methods that are explicitly defined by this class. It does not include inherited methods.<P>
<H3>methods</H3>
Each value in this table is a more complete description of a method in the class. See <A HREF=vmspec-10.html#MARKER-9-4>section 2.5</A> for more information on the <CODE>method_info</CODE> structure.<P>
<H3>attributes_count</H3>
This field indicates the number of additional attributes about this class.<P>
<H3>attributes</H3>
A class can have any number of optional attributes associated with it. Currently, the only class attribute recognized is the "SourceFile" attribute, which indicates the name of the source file from which this class file was compiled. See <A HREF=vmspec-11.html#MARKER-9-5>section 2.6</A> for more information on the <CODE>attribute_info</CODE> structure.<P>
<HR>
<A HREF="vmspec-1.html">Contents</A>       <A HREF="vmspec-5.html">Prev</A>       <A HREF="vmspec-7.html">Next</A>       <A HREF="vmspec-5.html">Up</A>       <P>
</BODY>
</HTML> 